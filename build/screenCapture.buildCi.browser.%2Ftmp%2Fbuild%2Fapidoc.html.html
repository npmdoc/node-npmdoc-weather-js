<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://github.com/devfacet/weather">weather-js (v2.0.0)</a>
</h1>
<h4>A module for obtaining weather information</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.weather-js">module weather-js</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weather-js.find">
            function <span class="apidocSignatureSpan">weather-js.</span>find
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weather-js" id="apidoc.module.weather-js">module weather-js</a></h1>


    <h2>
        <a href="#apidoc.element.weather-js.find" id="apidoc.element.weather-js.find">
        function <span class="apidocSignatureSpan">weather-js.</span>find
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function find(options, callback) {

  if(typeof callback !== 'function')
    callback = function callback(err, result) { return err || result; };

  if(!options || typeof options !== 'object')
    return callback('invalid options');

  if(!options.search)
    return callback('missing search input');

  var result     = [],
      lang       = options.lang || defLang,
      degreeType = options.degreeType || defDegreeType,
      timeout    = options.timeout || defTimeout,
      search     = qs.escape(''+options.search),
      reqUrl     = findUrl + '?src=outlook&amp;weadegreetype=' + (''+degreeType) + '&amp;culture=' + (''+lang) + '&amp;weasearchstr=' + search
;

  request.get({url: reqUrl, timeout: timeout}, function(err, res, body) {

    if(err)                    return callback(err);
    if(res.statusCode !== 200) return callback(new Error('request failed (' + res.statusCode + ')'));
    if(!body)                  return callback(new Error('failed to get body content'));

    // Check body content
    if(body.indexOf('&lt;') !== 0) {
      if(body.search(/not found/i) !== -1) {
        return callback(null, result);
      }
      return callback(new Error('invalid body content'));
    }

    // Parse body
    xmlParser.parseString(body, function(err, resultJSON) {
      if(err) return callback(err);

      if(!resultJSON || !resultJSON.weatherdata || !resultJSON.weatherdata.weather)
        return callback(new Error('failed to parse weather data'));

      if(resultJSON.weatherdata.weather['A$'] &amp;&amp; resultJSON.weatherdata.weather['A$'].errormessage)
        return callback(resultJSON.weatherdata.weather['A$'].errormessage);

      if(!(resultJSON.weatherdata.weather instanceof Array)) {
        return callback(new Error('missing weather info'));
      }

      // Iterate over weather data
      var weatherLen = resultJSON.weatherdata.weather.length,
          weatherItem;
      for(var i = 0; i &lt; weatherLen; i++) {

        if(typeof resultJSON.weatherdata.weather[i]['A$'] !== 'object')
          continue;

        // Init weather item
        weatherItem = {
          location: {
            name: resultJSON.weatherdata.weather[i]['A$']['weatherlocationname'],
            zipcode: resultJSON.weatherdata.weather[i]['A$']['zipcode'],
            lat: resultJSON.weatherdata.weather[i]['A$']['lat'],
            long: resultJSON.weatherdata.weather[i]['A$']['long'],
            timezone: resultJSON.weatherdata.weather[i]['A$']['timezone'],
            alert: resultJSON.weatherdata.weather[i]['A$']['alert'],
            degreetype: resultJSON.weatherdata.weather[i]['A$']['degreetype'],
            imagerelativeurl: resultJSON.weatherdata.weather[i]['A$']['imagerelativeurl']
            //url: resultJSON.weatherdata.weather[i]['A$']['url'],
            //code: resultJSON.weatherdata.weather[i]['A$']['weatherlocationcode'],
            //entityid: resultJSON.weatherdata.weather[i]['A$']['entityid'],
            //encodedlocationname: resultJSON.weatherdata.weather[i]['A$']['encodedlocationname']
          },
          current: null,
          forecast: null
        };

        if(resultJSON.weatherdata.weather[i]['current'] instanceof Array &amp;&amp; resultJSON.weatherdata.weather[i]['current'].length &gt;
0) {
          if(typeof resultJSON.weatherdata.weather[i]['current'][0]['A$'] === 'object') {
            weatherItem.current = resultJSON.weatherdata.weather[i]['current'][0]['A$'];

            weatherItem.current.imageUrl = weatherItem.location.imagerelativeurl + 'law/' + weatherItem.current.skycode + '.gif';
          }
        }

        if(resultJSON.weatherdata.weather[i]['forecast'] instanceof Array) {
          weatherItem.forecast = [];
          for(var k = 0; k &lt; resultJSON.weatherdata.weather[i]['forecast'].length; k++) {
            if(typeof resultJSON.weatherdata.weather[i]['forecast'][k]['A$'] === 'object')
              weatherItem.forecast.push(resultJSON.weatherdata.weather[i]['forecast'][k]['A$']);
          }
        }

        // Push weather item into result
        result.push(weatherItem);
      }

      return callback( ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var weather = require('weather-js');

// Options:
// search:     location name or zipcode
// degreeType: F or C

weather.<span class="apidocCodeKeywordSpan">find</span>({search: 'San Francisco, CA', degreeType: 'F'}, function
(err, result) {
  if(err) console.log(err);

  console.log(JSON.stringify(result, null, 2));
});
```
```bash
[
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>